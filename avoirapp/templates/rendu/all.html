{% extends 'layout/base.html' %}
{% load tz %}

{% block content %}
<div class="container mt-5">

    <!-- Titre et informations utilisateur -->
    <div class="row mb-4">
        <div class="col-md-6">
            <h2 class="font-weight-bold">
                <i class="fas fa-chart-line mr-2"></i> TABLEAU DE BORD
            </h2>
        </div>
        <div class="col-md-6 text-right">
            <p class="font-weight-bold">
                <i class="fas fa-user-circle mr-2"></i> {{ request.user|upper }} - <i class="fas fa-calendar-day ml-2 mr-1"></i> {{ current_date }}
            </p>
        </div>
    </div>

    <!-- Section Ventes Journalières -->
    <div class="row mb-4">
        <div class="col-md-12">
            <h3>Ventes Journalières</h3>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">NOM</th>
                            <th scope="col">PRÉNOM</th>
                            <th scope="col">DÉSIGNATION</th>
                            <th scope="col">CODE BARRE</th>
                            <th scope="col">PRIX VENTE</th>
                            <th scope="col">PRIX ACHAT</th>
                            <th scope="col">ACTION</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for vente in ventes %}
                        <tr>
                            <td>{{ vente.nom_client|title }}</td>
                            <td>{{ vente.prenom_client|title }}</td>
                            <td>{{ vente.designation_produit }}</td>
                            <td>{{ vente.code_barre }}</td>
                            <td>{{ vente.prix_vente }}</td>
                            <td>{{ vente.prix_achat }}</td>
                            <td><a href="{% url 'edit_rendu' id=vente.id %}" class="text-warning"><i class="bi bi-pencil text-black"></i></a></td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="6" class="text-center">AUCUNE VENTE ENREGISTRÉE</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <a href="{% url 'add_vente' %}" class="btn btn-primary">Ajouter une vente</a>
        </div>
    </div>

    <!-- Section Insertion en Stock -->
    <div class="row mb-4">
        <div class="col-md-12">
            <h3>Insertion en Stock</h3>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">Marque</th>
                            <th scope="col">Quantité</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for i in '12345' %}
                        <tr>
                            <td>{{ "Marque"|add:i }}</td>
                            <td>{{ i}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <a href="{% url 'add_stock' %}" class="btn btn-primary">Ajouter une ligne</a>
        </div>
    </div>

    <!-- Section Commande SAV -->
    <div class="row mb-4">
        <div class="col-md-12">
            <h3>Commande SAV</h3>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">Nom</th>
                            <th scope="col">Prénom</th>
                            <th scope="col">Fournisseur</th>
                            <th scope="col">Référence</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for i in '12345' %}
                        <tr>
                            <td>{{ "Nom"|add:i }}</td>
                            <td>{{ "Prénom"|add:i }}</td>
                            <td>{{ "Fournisseur"|add:i }}</td>
                            <td>{{ "Référence"|add:i }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <a href="{% url 'add_commande_sav' %}" class="btn btn-primary">Ajouter une commande SAV</a>
        </div>
    </div>

    <!-- Bouton de clôture -->
    <div class="row mb-4">
        <div class="col-md-12 text-center">
            <a href="{% url 'valider_cloture' %}?ca-jour={{ total_ventes }}&day={{ current_date  }}" class="btn btn-danger btn-lg">
                <i class="fas fa-lock mr-2"></i> CLOTURER LA JOURNÉE
            </a>
        </div>
    </div>

</div>
{% endblock %}
