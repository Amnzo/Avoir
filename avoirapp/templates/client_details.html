{% extends 'base.html' %}

{% block title %}  Détail Client {% endblock %}

{% block content %}
    <div class="container">
        <div class="card mt-5">
            <div class="card-header bg-primary text-white">
                <h2 class="mb-0">{{ client.nom }}</h2>
            </div>

            <ul class="nav nav-tabs" id="myTabs">
                <li class="nav-item">
                    <a class="nav-link active" id="client-details-tab" data-toggle="tab" href="#client-details">Détail Client</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="consomption-tab" data-toggle="tab" href="#consomption">Consomption History</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="avoir-tab" data-toggle="tab" href="#avoir">Avoir History</a>
                </li>
            </ul>

            <div class="tab-content">
                <!-- Client Details Tab -->
                <div class="tab-pane fade show active" id="client-details">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <p class="mb-2"><strong>Nom:</strong> {{ client.nom }} {{ client.prenom }}</p>
                                <p class="mb-2"><strong>Prénom:</strong> {{ client.email }}</p>
                                <p class="mb-2"><strong>Date de naissancee:</strong> {{ client.datenaissance }}</p>
                            </div>
                            <div class="col-md-6">
                                <div class="card {% if client.total_avoir_client == 0 %}bg-danger{% else %}bg-warning{% endif %} mb-3">
                                    <div class="card-body">
                                        <p class="mb-2"><strong>Solde Crédit :</strong> {{ client.total_avoir_client }} DH</p>
                                    </div>
                                </div>
                                <!-- Buttons for Ajouter Avoir and Consommer Avoir -->
                                <div class="mt-3">
                                    <a href="{% url 'ajouter_avoir' client.id %}" class="btn btn-primary mr-2">Ajouter Avoir</a>
                                    <a href="{% url 'consommer_avoir' client.id %}" class="btn btn-success">Consommer Avoir</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Consomption History Tab -->
                <div class="tab-pane fade" id="consomption">
                    <!-- Add your consomption history content here -->
                    <p>Consomption history content goes here.</p>
                </div>

                <!-- Avoir History Tab -->
                <div class="tab-pane fade" id="avoir">
                    <!-- Add your avoir history content here -->
                    <p>Avoir history content goes here.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript to handle Bootstrap tabs -->
    <script>
        $(document).ready(function(){
            $('#myTabs a').click(function (e) {
                e.preventDefault()
                $(this).tab('show')
            })
        });
    </script>
{% endblock %}
